@page "/history"

@inject ITimeEntryProvider TimeEntrySource


<PageTitle>History</PageTitle>

<h1>History</h1>


@if (TimeEntries != null)
{
    <Widget Title="Sick Days" Text="@SickDays.ToString()" />
    <Widget Title="Overtime" Text="@Overtime.ToString(@"dd\d\ hh\h\ mm\m")" />

    <div class="@FilterCssClass">
        <p class="filter-title" @onclick="OnFilterClick">Filter Settings</p>
        <div style="@(FilterColapsed ? "display: none" : "")">
            <FilterPopUp Filter="@DateFilter" style="@(DateFilter.Enabled ? "" : "display: none")" />
            <FilterPopUp Filter="@TimeFilter" style="@(TimeFilter.Enabled ? "" : "display: none")" />
            <FilterPopUp Filter="@TitleFilter" style="@(TitleFilter.Enabled ? "" : "display: none")" />
        </div>
    </div>
    

    <table class="list" style="width: 100%">
        <tr>
            <th>
                Time
            </th>
            <th>
                Date
            </th>
            <th>
                Start
            </th>
            <th>
                Stop
            </th>
            <th>
                Activity
            </th>
            <th>
                Description
            </th>
        </tr>


        @foreach (var Entry in TimeEntries.Where(e => DoFiltersApply(e)).Skip(Page*10).Take(10))
        {
            <HistoryEntry Entry="@Entry"/>
        }
    </table>

    <Button Text="Next" OnClick="OnNextClick"/>
    <Button Text="Previous" OnClick="OnPreviousClick" />

}
else
{
    <p>Loading...</p>
}
